homeguard-platform/
â”‚
â”œâ”€â”€ README.md
â”œâ”€â”€ package.json                    # Root package.json cho monorepo
â”œâ”€â”€ pnpm-workspace.yaml             # PNPM workspace config
â”œâ”€â”€ turbo.json                      # Turborepo config
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ docker-compose.yml              # Docker setup cho toÃ n bá»™ stack
â”‚
â”œâ”€â”€ apps/                           # Application Layer
â”‚   â”œâ”€â”€ web/                        # Next.js Frontend
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â”œâ”€â”€ next.config.js
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â”œâ”€â”€ tailwind.config.ts
â”‚   â”‚   â”œâ”€â”€ .env.local
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”‚   â”œâ”€â”€ sounds/
â”‚   â”‚   â”‚   â””â”€â”€ icons/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/                # Next.js 14 App Router
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ globals.css
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ (dashboard)/   # Route groups
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sensors/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ camera/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ behaviors/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ logs/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/            # API Routes
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ health/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ [...nextauth]/
â”‚   â”‚   â”‚   â”‚   â”‚           â””â”€â”€ route.ts
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ (auth)/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ register/
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ components/         # React Components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ui/             # Shadcn/ui components
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chart.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ features/       # Feature components
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sensors/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SensorCard.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SensorChart.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SensorGrid.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ camera/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LiveStream.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FaceRecognition.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MotionDetection.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RobotControl.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BehaviorDisplay.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ EmotionDisplay.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ voice/
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ VoiceCommands.tsx
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ConversationHistory.tsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ layout/         # Layout components
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ DashboardLayout.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/              # Custom React Hooks
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useSensorData.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useCamera.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useRobotControl.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ lib/                # Utilities & Configs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api-client.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ utils.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/             # State Management (Zustand)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useSensorStore.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useRobotStore.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAuthStore.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useUIStore.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ types/              # TypeScript Types
â”‚   â”‚   â”‚       â”œâ”€â”€ sensor.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ robot.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ websocket.ts
â”‚   â”‚   â”‚       â””â”€â”€ api.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ .eslintrc.js
â”‚   â”‚
â”‚   â””â”€â”€ api/                        # Backend WebSocket Server (Node.js/Bun)
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â”œâ”€â”€ .env
â”‚       â”‚
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ index.ts            # Entry point
â”‚       â”‚   â”œâ”€â”€ app.ts              # Express/Fastify app setup
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ config/
â”‚       â”‚   â”‚   â”œâ”€â”€ database.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ redis.ts
â”‚       â”‚   â”‚   â””â”€â”€ websocket.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ controllers/        # HTTP Controllers
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ sensor.controller.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ robot.controller.ts
â”‚       â”‚   â”‚   â””â”€â”€ logs.controller.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ services/           # Business Logic
â”‚       â”‚   â”‚   â”œâ”€â”€ esp32.service.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ ai-engine.service.ts        # ğŸ”„ RENAMED from laptop-ai.service.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ sensor.service.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ camera.service.ts
â”‚       â”‚   â”‚   â””â”€â”€ notification.service.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ websocket/          # WebSocket Handlers
â”‚       â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ esp32.handler.ts            # ESP32 connection
â”‚       â”‚   â”‚   â”œâ”€â”€ ai-engine.handler.ts        # ğŸ”„ RENAMED from laptop.handler.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ client.handler.ts           # Web client connection
â”‚       â”‚   â”‚   â””â”€â”€ message-router.ts           # Route messages between connections
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ models/             # Database Models (Prisma/TypeORM)
â”‚       â”‚   â”‚   â”œâ”€â”€ User.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ SensorData.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ BehaviorLog.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ VoiceLog.ts
â”‚       â”‚   â”‚   â””â”€â”€ ActuatorCommand.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ routes/             # API Routes
â”‚       â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.routes.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ sensor.routes.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ robot.routes.ts
â”‚       â”‚   â”‚   â””â”€â”€ logs.routes.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ middleware/
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ error.middleware.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ rate-limit.middleware.ts
â”‚       â”‚   â”‚   â””â”€â”€ validation.middleware.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ utils/
â”‚       â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ validation.ts
â”‚       â”‚   â”‚   â””â”€â”€ helpers.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ types/
â”‚       â”‚       â”œâ”€â”€ index.ts
â”‚       â”‚       â”œâ”€â”€ websocket.types.ts
â”‚       â”‚       â””â”€â”€ api.types.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ prisma/                 # Database Schema
â”‚       â”‚   â”œâ”€â”€ schema.prisma
â”‚       â”‚   â””â”€â”€ migrations/
â”‚       â”‚
â”‚       â””â”€â”€ tests/
â”‚           â”œâ”€â”€ unit/
â”‚           â””â”€â”€ integration/
â”‚
â”œâ”€â”€ packages/                       # Shared Packages
â”‚   â”œâ”€â”€ ui/                         # Shared UI Components
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”‚   â”œâ”€â”€ Card/
â”‚   â”‚   â”‚   â””â”€â”€ Chart/
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                      # Shared TypeScript Types
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ sensor.types.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ robot.types.ts
â”‚   â”‚   â”‚   â””â”€â”€ websocket.types.ts
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                      # Shared Utilities
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validators.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ formatters.ts
â”‚   â”‚   â”‚   â””â”€â”€ constants.ts
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â””â”€â”€ config/                     # Shared Configs
â”‚       â”œâ”€â”€ eslint-config/
â”‚       â”œâ”€â”€ typescript-config/
â”‚       â””â”€â”€ tailwind-config/
â”‚
â”œâ”€â”€ services/                       # External Services Integration
â”‚   â””â”€â”€ ai-engine-adapter/          # ğŸ”„ RENAMED from laptop-ai-adapter/
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ index.ts
â”‚       â”‚   â”œâ”€â”€ websocket-client.ts
â”‚       â”‚   â””â”€â”€ message-parser.ts
â”‚       â””â”€â”€ README.md
â”‚
â”œâ”€â”€ database/                       # Database Setup
â”‚   â”œâ”€â”€ schema.sql
â”‚   â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ seeds/
â”‚   â”‚   â”œâ”€â”€ users.seed.sql
â”‚   â”‚   â””â”€â”€ settings.seed.sql
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ docs/                           # Documentation
â”‚   â”œâ”€â”€ API.md
â”‚   â”œâ”€â”€ WEBSOCKET.md
â”‚   â”œâ”€â”€ DEPLOYMENT.md
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â””â”€â”€ CONTRIBUTING.md
â”‚
â”œâ”€â”€ scripts/                        # Build & Deploy Scripts
â”‚   â”œâ”€â”€ setup.sh
â”‚   â”œâ”€â”€ build.sh
â”‚   â”œâ”€â”€ deploy.sh
â”‚   â””â”€â”€ seed-database.sh
â”‚
â””â”€â”€ infrastructure/                 # Infrastructure as Code
    â”œâ”€â”€ docker/
    â”‚   â”œâ”€â”€ Dockerfile.web
    â”‚   â”œâ”€â”€ Dockerfile.api
    â”‚   â””â”€â”€ Dockerfile.nginx
    â”‚
    â”œâ”€â”€ kubernetes/
    â”‚   â”œâ”€â”€ deployment.yaml
    â”‚   â”œâ”€â”€ service.yaml
    â”‚   â””â”€â”€ ingress.yaml
    â”‚
    â””â”€â”€ nginx/
        â””â”€â”€ nginx.conf

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c thiáº¿t káº¿ theo mÃ´ hÃ¬nh Monorepo + Turborepo + PNPM Workspaces, nghÄ©a lÃ :

ToÃ n bá»™ frontend, backend, shared packages, scripts, docs,â€¦ náº±m trong má»™t repo duy nháº¥t.

Má»—i pháº§n (á»©ng dá»¥ng hoáº·c thÆ° viá»‡n) lÃ  má»™t package Ä‘á»™c láº­p, cÃ³ package.json riÃªng.

Turborepo quáº£n lÃ½ viá»‡c build, cache vÃ  cháº¡y song song cÃ¡c apps.

Docker Compose + Kubernetes há»— trá»£ triá»ƒn khai toÃ n bá»™ há»‡ thá»‘ng.
---------------------------------------------------------------------

há»a mÃ£n 4 nguyÃªn táº¯c cá»§a enterprise-grade architecture:

Separation of concerns â€“ PhÃ¢n tÃ¡ch rÃµ tá»«ng táº§ng:
apps (frontend/backend) â†” packages (shared libs) â†” infra (triá»ƒn khai).

Scalability â€“ Dá»… má»Ÿ rá»™ng thÃªm module hoáº·c microservice (chá»‰ cáº§n thÃªm package).

Reusability â€“ CÃ¡c module nhÆ° UI, types, utils dÃ¹ng láº¡i Ä‘Æ°á»£c á»Ÿ má»i nÆ¡i.

CI/CD friendly â€“ Build, test, deploy tÃ¡ch biá»‡t, cÃ³ thá»ƒ cache hoáº·c cháº¡y song song.
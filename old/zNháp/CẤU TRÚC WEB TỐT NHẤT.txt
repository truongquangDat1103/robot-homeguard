homeguard-platform/
â”‚
â”œâ”€â”€ README.md                            # TÃ i liá»‡u hÆ°á»›ng dáº«n tá»•ng quan dá»± Ã¡n: setup, kiáº¿n trÃºc, deploy
â”œâ”€â”€ package.json                         # Cáº¥u hÃ¬nh dependencies, scripts cho toÃ n monorepo
â”œâ”€â”€ pnpm-workspace.yaml                  # Äá»‹nh nghÄ©a workspace cá»§a PNPM, liÃªn káº¿t cÃ¡c apps & packages
â”œâ”€â”€ turbo.json                           # Cáº¥u hÃ¬nh Turborepo: pipeline build, lint, test, cache,...
â”œâ”€â”€ .env.example                         # Máº«u biáº¿n mÃ´i trÆ°á»ng cho toÃ n há»‡ thá»‘ng
â”œâ”€â”€ .gitignore                           # Danh sÃ¡ch file/thÆ° má»¥c khÃ´ng commit lÃªn git
â”œâ”€â”€ docker-compose.yml                   # Docker setup cho toÃ n bá»™ stack (web, api, db, redis, nginx)
â”‚
â”œâ”€â”€ apps/                                # Application Layer: chá»©a cÃ¡c á»©ng dá»¥ng chÃ­nh (frontend & backend)
â”‚   â”œâ”€â”€ web/                             # ğŸ–¥ï¸  Frontend - Next.js 14 (App Router)
â”‚   â”‚   â”œâ”€â”€ package.json                 # Cáº¥u hÃ¬nh dependencies riÃªng cho web app
â”‚   â”‚   â”œâ”€â”€ next.config.js               # Cáº¥u hÃ¬nh Next.js (images, env, experimental features)
â”‚   â”‚   â”œâ”€â”€ tsconfig.json                # Cáº¥u hÃ¬nh TypeScript cho frontend
â”‚   â”‚   â”œâ”€â”€ tailwind.config.ts           # Cáº¥u hÃ¬nh TailwindCSS theme, plugin, mÃ u sáº¯c
â”‚   â”‚   â”œâ”€â”€ .env.local                   # Biáº¿n mÃ´i trÆ°á»ng riÃªng cho frontend (API_URL, WS_URL,...)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ public/                      # Static assets (áº£nh, Ã¢m thanh, icon)
â”‚   â”‚   â”‚   â”œâ”€â”€ images/                  # HÃ¬nh áº£nh sá»­ dá»¥ng trong giao diá»‡n
â”‚   â”‚   â”‚   â”œâ”€â”€ sounds/                  # Ã‚m thanh thÃ´ng bÃ¡o, hiá»‡u á»©ng
â”‚   â”‚   â”‚   â””â”€â”€ icons/                   # Bá»™ biá»ƒu tÆ°á»£ng SVG / PNG
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ src/                         # Source code chÃ­nh cá»§a frontend
â”‚   â”‚   â”‚   â”œâ”€â”€ app/                     # App Router cá»§a Next.js 14
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx           # Layout tá»•ng cá»§a á»©ng dá»¥ng
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx             # Trang chÃ­nh (home)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ globals.css          # CSS toÃ n cá»¥c
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ (dashboard)/         # NhÃ³m route cá»§a dashboard (sau khi Ä‘Äƒng nháº­p)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx       # Layout riÃªng cá»§a dashboard (Sidebar + Header)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx         # Trang tá»•ng quan dashboard
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sensors/         # Module quáº£n lÃ½ cáº£m biáº¿n
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx     # Giao diá»‡n dá»¯ liá»‡u cáº£m biáº¿n realtime
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ camera/          # Module camera
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx     # Hiá»ƒn thá»‹ video live, nháº­n diá»‡n khuÃ´n máº·t
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ behaviors/       # Module hÃ nh vi cá»§a robot
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx     # Theo dÃµi vÃ  Ä‘iá»u chá»‰nh hÃ nh vi robot
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ logs/            # Nháº­t kÃ½ hoáº¡t Ä‘á»™ng
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx     # Hiá»ƒn thá»‹ log cáº£m biáº¿n, camera, hÃ nh vi
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ settings/        # Cáº¥u hÃ¬nh há»‡ thá»‘ng
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx     # CÃ i Ä‘áº·t ngÆ°á»i dÃ¹ng, API key, theme,...
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api/                 # API routes (Serverless API)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ health/route.ts  # Endpoint kiá»ƒm tra sá»©c khá»e há»‡ thá»‘ng
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth/[...nextauth]/route.ts # Cáº¥u hÃ¬nh xÃ¡c thá»±c (NextAuth)
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ (auth)/              # NhÃ³m route xÃ¡c thá»±c
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ login/page.tsx   # Trang Ä‘Äƒng nháº­p
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ register/page.tsx# Trang Ä‘Äƒng kÃ½ tÃ i khoáº£n
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ components/              # CÃ¡c thÃ nh pháº§n giao diá»‡n tÃ¡i sá»­ dá»¥ng
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ui/                  # Shadcn/ui components: button, card, chart, ...
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chart.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ features/            # Component theo tÃ­nh nÄƒng
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ sensors/         # TÃ­nh nÄƒng hiá»ƒn thá»‹ cáº£m biáº¿n
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SensorCard.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SensorChart.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SensorGrid.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ camera/          # TÃ­nh nÄƒng camera
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LiveStream.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FaceRecognition.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ MotionDetection.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ robot/           # Äiá»u khiá»ƒn robot
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RobotControl.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BehaviorDisplay.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ EmotionDisplay.tsx
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ voice/           # Nháº­n diá»‡n vÃ  Ä‘iá»u khiá»ƒn báº±ng giá»ng nÃ³i
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ VoiceCommands.tsx
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ConversationHistory.tsx
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ layout/              # Layout UI components (Header, Sidebar,...)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ DashboardLayout.tsx
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/                   # Custom React Hooks
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts      # Hook quáº£n lÃ½ káº¿t ná»‘i realtime
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useSensorData.ts     # Láº¥y vÃ  cáº­p nháº­t dá»¯ liá»‡u cáº£m biáº¿n
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useCamera.ts         # Quáº£n lÃ½ camera livestream
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useRobotControl.ts   # Äiá»u khiá»ƒn robot tá»« giao diá»‡n
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ lib/                     # ThÆ° viá»‡n & cáº¥u hÃ¬nh
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ websocket.ts         # Cáº¥u hÃ¬nh WebSocket client
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ api-client.ts        # Thiáº¿t láº­p Axios/fetch API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ utils.ts             # HÃ m tiá»‡n Ã­ch chung
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ constants.ts         # Biáº¿n cá»‘ Ä‘á»‹nh (endpoint, key,...)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/                  # Zustand stores (state management)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useSensorStore.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useRobotStore.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useAuthStore.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useUIStore.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ types/                   # TypeScript types cho frontend
â”‚   â”‚   â”‚       â”œâ”€â”€ sensor.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ robot.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ websocket.ts
â”‚   â”‚   â”‚       â””â”€â”€ api.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ .eslintrc.js                 # Cáº¥u hÃ¬nh linting code cho frontend
â”‚   â”‚
â”‚   â””â”€â”€ api/                             # âš™ï¸ Backend WebSocket + REST API
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â”œâ”€â”€ .env
â”‚       â”‚
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ index.ts                 # Entry point khá»Ÿi Ä‘á»™ng server
â”‚       â”‚   â”œâ”€â”€ app.ts                   # Khá»Ÿi táº¡o Express/Fastify app
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ config/                  # Cáº¥u hÃ¬nh há»‡ thá»‘ng backend
â”‚       â”‚   â”‚   â”œâ”€â”€ database.ts          # Káº¿t ná»‘i database (Prisma/TypeORM)
â”‚       â”‚   â”‚   â”œâ”€â”€ redis.ts             # Káº¿t ná»‘i Redis cache/pubsub
â”‚       â”‚   â”‚   â””â”€â”€ websocket.ts         # Thiáº¿t láº­p WebSocket server
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ controllers/             # Controller xá»­ lÃ½ HTTP request
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.controller.ts   # XÃ¡c thá»±c ngÆ°á»i dÃ¹ng
â”‚       â”‚   â”‚   â”œâ”€â”€ sensor.controller.ts # CRUD dá»¯ liá»‡u cáº£m biáº¿n
â”‚       â”‚   â”‚   â”œâ”€â”€ robot.controller.ts  # Äiá»u khiá»ƒn robot
â”‚       â”‚   â”‚   â””â”€â”€ logs.controller.ts   # Quáº£n lÃ½ log & lá»‹ch sá»­
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ services/                # Xá»­ lÃ½ nghiá»‡p vá»¥ (Business logic)
â”‚       â”‚   â”‚   â”œâ”€â”€ esp32.service.ts     # Giao tiáº¿p vá»›i ESP32
â”‚       â”‚   â”‚   â”œâ”€â”€ ai-engine.service.ts # TÃ­ch há»£p AI (nháº­n diá»‡n, pháº£n há»“i)
â”‚       â”‚   â”‚   â”œâ”€â”€ sensor.service.ts    # Xá»­ lÃ½ dá»¯ liá»‡u cáº£m biáº¿n
â”‚       â”‚   â”‚   â”œâ”€â”€ camera.service.ts    # Streaming & nháº­n diá»‡n hÃ¬nh áº£nh
â”‚       â”‚   â”‚   â””â”€â”€ notification.service.ts # Gá»­i thÃ´ng bÃ¡o (push/email/webhook)
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ websocket/               # Xá»­ lÃ½ káº¿t ná»‘i WebSocket
â”‚       â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ esp32.handler.ts     # Giao tiáº¿p vá»›i thiáº¿t bá»‹ ESP32
â”‚       â”‚   â”‚   â”œâ”€â”€ ai-engine.handler.ts # Giao tiáº¿p vá»›i AI Engine
â”‚       â”‚   â”‚   â”œâ”€â”€ client.handler.ts    # Káº¿t ná»‘i client web
â”‚       â”‚   â”‚   â””â”€â”€ message-router.ts    # Äá»‹nh tuyáº¿n tin nháº¯n giá»¯a cÃ¡c káº¿t ná»‘i
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ models/                  # Äá»‹nh nghÄ©a model database
â”‚       â”‚   â”‚   â”œâ”€â”€ User.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ SensorData.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ BehaviorLog.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ VoiceLog.ts
â”‚       â”‚   â”‚   â””â”€â”€ ActuatorCommand.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ routes/                  # Äá»‹nh tuyáº¿n API (Express/Fastify)
â”‚       â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.routes.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ sensor.routes.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ robot.routes.ts
â”‚       â”‚   â”‚   â””â”€â”€ logs.routes.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ middleware/              # Middleware xá»­ lÃ½ giá»¯a request
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ error.middleware.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ rate-limit.middleware.ts
â”‚       â”‚   â”‚   â””â”€â”€ validation.middleware.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ utils/                   # HÃ m tiá»‡n Ã­ch backend
â”‚       â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚       â”‚   â”‚   â”œâ”€â”€ validation.ts
â”‚       â”‚   â”‚   â””â”€â”€ helpers.ts
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ types/                   # TypeScript type definitions backend
â”‚       â”‚       â”œâ”€â”€ index.ts
â”‚       â”‚       â”œâ”€â”€ websocket.types.ts
â”‚       â”‚       â””â”€â”€ api.types.ts
â”‚       â”‚
â”‚       â”œâ”€â”€ prisma/                      # Prisma schema & migrations
â”‚       â”‚   â”œâ”€â”€ schema.prisma
â”‚       â”‚   â””â”€â”€ migrations/
â”‚       â”‚
â”‚       â””â”€â”€ tests/                       # Unit & integration tests
â”‚           â”œâ”€â”€ unit/
â”‚           â””â”€â”€ integration/
â”‚
â”œâ”€â”€ packages/                            # ğŸ“¦ Shared packages (dÃ¹ng chung cho web + api)
â”‚   â”œâ”€â”€ ui/                              # ThÆ° viá»‡n UI components dÃ¹ng chung
â”‚   â”œâ”€â”€ types/                           # Chia sáº» TypeScript types
â”‚   â”œâ”€â”€ utils/                           # HÃ m tiá»‡n Ã­ch chung
â”‚   â””â”€â”€ config/                          # Cáº¥u hÃ¬nh lint, ts, tailwind dÃ¹ng chung
â”‚
â”œâ”€â”€ services/                            # ğŸ”Œ External integrations
â”‚   â””â”€â”€ ai-engine-adapter/               # Giao tiáº¿p giá»¯a backend vÃ  AI Engine cá»¥c bá»™
â”‚
â”œâ”€â”€ database/                            # Database scripts: schema, seeds, migration
â”‚
â”œâ”€â”€ docs/                                # ğŸ“š TÃ i liá»‡u kiáº¿n trÃºc, API, WebSocket, Deploy,...
â”‚
â”œâ”€â”€ scripts/                             # Script build, deploy, setup mÃ´i trÆ°á»ng
â”‚
â””â”€â”€ infrastructure/                      # âš™ï¸ IaC (Infrastructure as Code): Docker, K8s, Nginx


Dá»± Ã¡n nÃ y Ä‘Æ°á»£c thiáº¿t káº¿ theo mÃ´ hÃ¬nh Monorepo + Turborepo + PNPM Workspaces, nghÄ©a lÃ :

ToÃ n bá»™ frontend, backend, shared packages, scripts, docs,â€¦ náº±m trong má»™t repo duy nháº¥t.

Má»—i pháº§n (á»©ng dá»¥ng hoáº·c thÆ° viá»‡n) lÃ  má»™t package Ä‘á»™c láº­p, cÃ³ package.json riÃªng.

Turborepo quáº£n lÃ½ viá»‡c build, cache vÃ  cháº¡y song song cÃ¡c apps.

Docker Compose + Kubernetes há»— trá»£ triá»ƒn khai toÃ n bá»™ há»‡ thá»‘ng.
---------------------------------------------------------------------

há»a mÃ£n 4 nguyÃªn táº¯c cá»§a enterprise-grade architecture:

Separation of concerns â€“ PhÃ¢n tÃ¡ch rÃµ tá»«ng táº§ng:
apps (frontend/backend) â†” packages (shared libs) â†” infra (triá»ƒn khai).

Scalability â€“ Dá»… má»Ÿ rá»™ng thÃªm module hoáº·c microservice (chá»‰ cáº§n thÃªm package).

Reusability â€“ CÃ¡c module nhÆ° UI, types, utils dÃ¹ng láº¡i Ä‘Æ°á»£c á»Ÿ má»i nÆ¡i.

CI/CD friendly â€“ Build, test, deploy tÃ¡ch biá»‡t, cÃ³ thá»ƒ cache hoáº·c cháº¡y song song.